<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">

<head th:replace="~{admin/layout/header :: admin_head}">
    <title>Qu·∫£n l√Ω ƒë∆°n h√†ng</title>
</head>

<style>
    :root {
        --primary-color: #4e73df;
        --bg-admin: #f8f9fc;
        --text-dark: #1e293b;
    }

    body {
        background-color: var(--bg-admin);
        font-family: 'Inter', system-ui, -apple-system, sans-serif;
        color: var(--text-dark);
    }

    .page-title {
        font-weight: 800;
        color: var(--text-dark);
        margin-bottom: 25px;
        display: flex;
        align-items: center;
        gap: 12px;
    }

    /* --- TABLE CONTAINER --- */
    .order-card {
        background: #fff;
        border-radius: 12px;
        box-shadow: 0 4px 20px rgba(0,0,0,0.05);
        border: none;
        overflow: hidden;
    }

    .table-responsive {
        padding: 0;
    }

    .table {
        margin-bottom: 0;
        vertical-align: middle;
    }

    .table thead {
        background-color: #f1f5f9;
    }

    .table thead th {
        font-weight: 700;
        font-size: 0.8rem;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        color: #64748b;
        padding: 16px 20px;
        border: none;
    }

    .table tbody td {
        padding: 18px 20px;
        border-bottom: 1px solid #f1f5f9;
        font-size: 0.95rem;
    }

    .table tbody tr:hover {
        background-color: #fdfdfd;
        transition: 0.2s;
    }

    /* --- BADGE TR·∫†NG TH√ÅI --- */
    .status-badge {
        padding: 6px 14px;
        border-radius: 50px;
        font-size: 0.75rem;
        font-weight: 700;
        display: inline-block;
        text-align: center;
        min-width: 110px;
    }

    /* Logic m√†u s·∫Øc tr·∫°ng th√°i */
    .st-waiting { background-color: #fff7ed; color: #c2410c; border: 1px solid #ffedd5; } /* Ch·ªù duy·ªát */
    .st-success { background-color: #f0fdf4; color: #166534; border: 1px solid #dcfce7; } /* Ho√†n th√†nh */
    .st-cancel { background-color: #fef2f2; color: #991b1b; border: 1px solid #fee2e2; } /* ƒê√£ h·ªßy */
    .st-shipping { background-color: #eff6ff; color: #1e40af; border: 1px solid #dbeafe; } /* ƒêang giao */

    /* --- BUTTON --- */
    .btn-detail {
        background-color: #fff;
        color: var(--primary-color);
        border: 1.5px solid var(--primary-color);
        padding: 6px 16px;
        border-radius: 8px;
        font-weight: 600;
        text-decoration: none;
        font-size: 0.85rem;
        transition: 0.3s;
    }

    .btn-detail:hover {
        background-color: var(--primary-color);
        color: #fff;
        box-shadow: 0 4px 12px rgba(78, 115, 223, 0.25);
    }

    /* --- SEARCH BAR --- */
    .search-box {
        max-width: 300px;
        margin-bottom: 20px;
    }

    .order-code {
        font-family: 'Monaco', 'Consolas', monospace;
        font-weight: 600;
        color: #475569;
        background: #f8fafc;
        padding: 4px 8px;
        border-radius: 4px;
    }
</style>

<body>

<div th:replace="~{admin/layout/header :: admin_navbar}"></div>

<div class="container-fluid px-4 mt-4">

    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2 class="page-title">
            <span>üì¶</span> QU·∫¢N L√ù ƒê∆†N H√ÄNG
        </h2>
        <div class="text-muted">T·ªïng s·ªë: <strong th:text="${#lists.size(list)}">0</strong> ƒë∆°n h√†ng</div>
    </div>

    <div class="order-card">
        <div class="table-responsive">
            <table class="table">
                <thead>
                <tr>
                    <th>M√£ ƒë∆°n h√†ng</th>
                    <th>Ng√†y ƒë·∫∑t h√†ng</th>
                    <th>T·ªïng ti·ªÅn thanh to√°n</th>
                    <th>Tr·∫°ng th√°i h·ªá th·ªëng</th>
                    <th class="text-center">Thao t√°c</th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="dh : ${list}">
                    <td>
                        <span class="order-code" th:text="${dh.maDonHang}"></span>
                    </td>
                    <td class="text-secondary">
                        <span th:text="${#temporals.format(dh.ngayDat, 'dd/MM/yyyy HH:mm')}"></span>
                    </td>
                    <td>
                            <span class="fw-bold text-dark"
                                  th:text="${#numbers.formatDecimal(dh.tongTien, 0, 'POINT', 0, 'COMMA')} + ' ƒë'">
                            </span>
                    </td>
                    <td>
                            <span class="status-badge"
                                  th:classappend="${dh.trangThai == 'Ch·ªù duy·ªát' or dh.trangThai == 'CHO_DUYET' ? 'st-waiting' :
                                                   (dh.trangThai == 'Ho√†n th√†nh' or dh.trangThai == 'HOAN_THANH' ? 'st-success' :
                                                   (dh.trangThai == 'ƒêang giao' or dh.trangThai == 'DANG_GIAO' ? 'st-shipping' : 'st-cancel'))}"
                                  th:text="${dh.trangThai}">
                            </span>
                    </td>
                    <td class="text-center">
                        <a th:href="@{/admin/donhang/detail/{id}(id=${dh.id})}" class="btn-detail">
                            <i class="fas fa-eye me-1"></i> Xem chi ti·∫øt
                        </a>
                    </td>
                </tr>

                <tr th:if="${#lists.isEmpty(list)}">
                    <td colspan="5" class="text-center py-5">
                        <div class="text-muted">
                            <div style="font-size: 40px;">üì≠</div>
                            <p class="mt-2">Hi·ªán t·∫°i ch∆∞a c√≥ ƒë∆°n h√†ng n√†o ƒë·ªÉ hi·ªÉn th·ªã.</p>
                        </div>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

</body>
</html>