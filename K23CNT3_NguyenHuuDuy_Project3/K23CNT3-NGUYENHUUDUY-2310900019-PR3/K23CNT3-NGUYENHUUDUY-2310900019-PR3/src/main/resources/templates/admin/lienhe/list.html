<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">

<head th:replace="~{admin/layout/header :: admin_head}">
    <title>Quản lý liên hệ | Admin</title>
</head>

<style>
    :root {
        --primary-admin: #4e73df;
        --bg-admin: #f8f9fc;
        --border-color: #e3e6f0;
    }

    body {
        background-color: var(--bg-admin);
        font-family: 'Inter', -apple-system, sans-serif;
        color: #5a5c69;
    }

    .page-header {
        margin: 25px 0;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

    .page-title {
        font-weight: 800;
        color: #4e73df;
        font-size: 1.5rem;
        text-transform: uppercase;
        margin: 0;
    }

    /* Table Container */
    .data-card {
        background: #fff;
        border-radius: 12px;
        box-shadow: 0 0.15rem 1.75rem 0 rgba(58, 59, 69, 0.1);
        border: none;
        overflow: hidden;
        margin-bottom: 30px;
    }

    .table {
        margin-bottom: 0;
        vertical-align: middle;
    }

    .table thead {
        background-color: #f1f4f9;
    }

    .table thead th {
        font-weight: 700;
        font-size: 0.8rem;
        text-transform: uppercase;
        color: #6e707e;
        padding: 15px 20px;
        border: none;
    }

    .table tbody td {
        padding: 15px 20px;
        border-bottom: 1px solid #eff2f7;
        font-size: 0.9rem;
    }

    .table tbody tr:hover {
        background-color: #f8f9fc;
        transition: background-color 0.2s ease;
    }

    /* Info Badges */
    .user-name {
        font-weight: 700;
        color: #2e59d9;
    }

    .contact-info {
        font-size: 0.85rem;
        color: #858796;
    }

    .msg-preview {
        max-width: 300px;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        display: block;
        color: #4e73df;
        font-style: italic;
    }

    .time-badge {
        font-size: 0.8rem;
        background: #eaecf4;
        padding: 4px 10px;
        border-radius: 5px;
        color: #5a5c69;
    }

    /* Actions */
    .btn-delete {
        background-color: #fff;
        color: #e74a3b;
        border: 1px solid #e74a3b;
        padding: 5px 12px;
        border-radius: 6px;
        font-weight: 600;
        transition: all 0.2s;
        text-decoration: none;
    }

    .btn-delete:hover {
        background-color: #e74a3b;
        color: #fff;
        box-shadow: 0 4px 10px rgba(231, 74, 59, 0.3);
    }

    .empty-state {
        text-align: center;
        padding: 50px;
        color: #b7b9cc;
    }
</style>

<body>

<div th:replace="~{admin/layout/header :: admin_navbar}"></div>

<div class="container-fluid px-4">

    <div class="page-header">
        <h2 class="page-title">Hộp thư liên hệ</h2>
        <div class="small text-muted">Tổng số tin nhắn: <strong th:text="${#lists.size(list)}">0</strong></div>
    </div>

    <div class="data-card">
        <div class="table-responsive">
            <table class="table">
                <thead>
                <tr>
                    <th>Khách hàng</th>
                    <th>Thông tin liên lạc</th>
                    <th>Nội dung tin nhắn</th>
                    <th>Thời gian</th>
                    <th class="text-center">Hành động</th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="lh : ${list}">
                    <td>
                        <div class="user-name" th:text="${lh.hoTen}">Họ tên</div>
                    </td>
                    <td>
                        <div class="contact-info">
                            <div><i class="fas fa-envelope fa-sm me-1"></i> <span th:text="${lh.email}"></span></div>
                            <div><i class="fas fa-phone fa-sm me-1"></i> <span th:text="${lh.soDienThoai}"></span></div>
                        </div>
                    </td>
                    <td>
                        <span class="msg-preview" th:text="${lh.noiDung}" th:title="${lh.noiDung}"></span>
                    </td>
                    <td>
                                <span class="time-badge">
                                    <i class="far fa-clock me-1"></i>
                                    <span th:text="${#temporals.format(lh.thoiGianGui,'dd/MM/yyyy HH:mm')}"></span>
                                </span>
                    </td>
                    <td class="text-center">
                        <a th:href="@{/admin/lienhe/xoa/{id}(id=${lh.id})}"
                           class="btn-delete"
                           onclick="return confirm('Bạn có chắc chắn muốn xóa liên hệ này?')">
                            <i class="fas fa-trash-alt me-1"></i> Xóa
                        </a>
                    </td>
                </tr>

                <tr th:if="${#lists.isEmpty(list)}">
                    <td colspan="5">
                        <div class="empty-state">
                            <i class="fas fa-inbox fa-3x mb-3"></i>
                            <p>Không có yêu cầu liên hệ nào mới.</p>
                        </div>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>